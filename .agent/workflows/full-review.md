---
description: プロジェクトのコードとアーキテクチャを包括的にレビューし、TODOリストを優先度順に更新する
---

1. **現状把握**:
   - `find_by_name` を使用して `src` ディレクトリ以下のファイル構成を把握する。
   - `view_file` で `dev-docs/TODO.md` を読み込み、既存のタスクを確認する。

2. **コード分析**:
   - 以下の主要ファイルを重点的に `view_file` で確認し、課題を抽出する:
     - `src/lib/` (ロジック、ユーティリティ - 特に `storage.ts`, `sync-utils.ts`)
     - `src/hooks/` (状態管理 - `useGroups.ts`, `useDashboardDnD.ts`, `useKeyboardNav.ts`)
     - `src/background/` (バックグラウンド処理 - `index.ts`)
     - `src/features/` (UIコンポーネント - `Dashboard.tsx` 等)
   - **チェック観点**:
     - **設計**: 責務の分離、依存関係、DRY原則、単一責任の原則
     - **品質**: エラーハンドリング（特に非同期処理）、型安全性、入力検証
     - **テスト**: 未テストの複雑なロジックがないか
     - **保守性**: 命名規則、可読性、複雑すぎる関数、古いTODOコメント
     - **一貫性**: コーディング規約や設計思想との整合性

3. **タスク作成**:
   - 発見した問題点を「具体的で実行可能な」タスクとして定義する。
   - 各タスクに優先度とタイプを割り当てる:
     - **優先度**:
       - 🚨 **High**: バグ、データ損失リスク、セキュリティ問題、重大な技術的負債
       - ⚠️ **Medium**: 機能改善、パフォーマンス向上、中程度の複雑さの解消
       - 💡 **Low**: 軽微なリファクタリング、ドキュメント、UIの調整
     - **タイプ**:
       - ✨ Feature, 🔧 Refactor, 🐛 Bug, ⚡ Performance, 📦 Infra

4. **TODO更新**:
   - `view_file` で `dev-docs/TODO.md` の最新状態を確認する（分析中に変更されている可能性があるため）。
   - `replace_file_content` (または `multi_replace_file_content`) を使用して、`dev-docs/TODO.md` の `Active` セクションにタスクを追記する。
   - **重要**: 優先度が高い順（🚨 -> ⚠️ -> 💡）になるようにリストを並べ替えるか、適切な位置に挿入する。
   - フォーマット: `- [ ] {Priority}{Type} {内容} ({関連ファイル})`

5. **完了**:
   - 追加したタスクの概要をユーザーに報告する。
